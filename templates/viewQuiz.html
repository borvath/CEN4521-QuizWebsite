{% extends "admin_pages/admin.html" %}

{% block head %}
    {{ super() }}
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/table.css') }}" />
{% endblock %}

{% block title %}View Quizzes{% endblock %}

{% block header %}
    {{ super() }}
{% endblock %}

{% block main %}
    <table>
        <tr>
            <th>Course</th>
            <th>Quiz Name</th>
            <th>Question</th>
            <th>Correct Answer</th>
        </tr>

        <!-- If it's just a single quiz it needs to be handled differently since it is not in a list.
        Jinja2's "mapping" test is used to check to see if it's a dict or a list. The former implies a single quiz.-->
        {% if quizzes is mapping %}
            <tr>
                <td>{{ quizzes.name }}</td>
                {% for question in quizzes.questions %}
                    {% for answer in question.answers %}
                        <td>{{ question.question_text }}</td>
                        <td>{{ answer.answer_text }}</td>
                    {% endfor %}
                {% endfor %}
            </tr>
        {% else %}
        {% for quiz in quizzes %}
            {% for question in quiz.questions %}
                {% for answer in question.answers %}
                    {% if answer.is_correct %}
                        <tr>
                            <td>{{ quiz.course }}</td>
                            <td>{{ quiz.name }}</td>
                            <td>{{ question.question_text }}</td>
                            <td>{{ answer.answer_text }}</td>
                        </tr>
                    {% endif %}
                {% endfor %}
            {% endfor %}
        {% endfor %}
    {% endif %}
    </table>
{% endblock %}
